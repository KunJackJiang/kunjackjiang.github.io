---
layout: page
title: 首页
---
<script>
  window,onload=function(){
    var imgs=document.getElementsByTagName('img');
    for(var i=0,j=imgs.length;i<j;i++){
      (imgs[i].onerror=function(){
        imgs[i].style.display='none';
      })(); //注意这里的写法。形如(function(){...})()，这是js里的一种特殊写法，很有效。
    }
  }
</script>
<div class="page page-index"
     style="
    margin-left: 10%;
    width:90%;
    margin-top: 5px;
position:relative;">
  {% for post in site.posts  -%}
    {%- capture post_year %}{{ post.date | date: "%Y" }}{% endcapture -%}
    {%- capture post_previous_year %}{{ post.previousprevious.date | date: "%Y" }}{% endcapture -%}
    {%- capture post_next_year %}{{ post.next.date | date: "%Y" }}{% endcapture -%}
    {%- if forloop.first or post_next_year != post_year -%}
    <div class="list-post">
      <h2 id="{{post_year}}">{{post_year}}</h2>
      <ul>
    {%- endif %}
        <li>
          <span class="date">{{ post.date | date: "%Y/%m/%d" }}</span>
          <div class="title">
            <a href="{{ site.baseurl | append: post.url }}" class="hover-underline">{{ post.title }}</a>
          </div>
          <script type="text/javascript">
            $(function () {
              var a = $('body').find('.img img')
              a.each(function () {
                if ($(this).attr('src') == '') {
                  $(this).parent($('.img')).css("display", "none")
                  $(this).parent($('.img')).next($('.text')).css("width", "100%")
                }
              })
            })
          </script>
          <div class ="blog img">

            <img src='{{ site.baseurl }}/posts/{{ post.date | date: "%Y/%m/%d" }}/{{ post.title }}.png'>

          </div>
        </li>
    {%- if forloop.last or post_previous_year != post_year %}
      </ul>
    </div>

    {%- endif %}
  {%- endfor %}
</div>
